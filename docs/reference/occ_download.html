<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Spin up a download request for GBIF occurrence data. — occ_download • rgbif</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Spin up a download request for GBIF occurrence data. — occ_download" />
<meta property="og:description" content="Spin up a download request for GBIF occurrence data." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgbif</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.6.1.99</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rgbif.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/downloading_a_long_species_list.html">Downloading A Long Species List</a>
    </li>
    <li>
      <a href="../articles/gbif_citations.html">Citing GBIF Mediated Data</a>
    </li>
    <li>
      <a href="../articles/gbif_credentials.html">Set Up Your GBIF Username and Password</a>
    </li>
    <li>
      <a href="../articles/getting_occurrence_data.html">Getting Occurrence Data From GBIF</a>
    </li>
    <li>
      <a href="../articles/taxonomic_names.html">Working With Taxonomic Names</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/rgbif/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Spin up a download request for GBIF occurrence data.</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/rgbif/blob/master/R/occ_download.R'><code>R/occ_download.R</code></a></small>
    <div class="hidden name"><code>occ_download.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Spin up a download request for GBIF occurrence data.</p>
    </div>

    <pre class="usage"><span class='fu'>occ_download</span><span class='op'>(</span>
  <span class='va'>...</span>,
  body <span class='op'>=</span> <span class='cn'>NULL</span>,
  type <span class='op'>=</span> <span class='st'>"and"</span>,
  format <span class='op'>=</span> <span class='st'>"DWCA"</span>,
  user <span class='op'>=</span> <span class='cn'>NULL</span>,
  pwd <span class='op'>=</span> <span class='cn'>NULL</span>,
  email <span class='op'>=</span> <span class='cn'>NULL</span>,
  curlopts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>occ_download_prep</span><span class='op'>(</span>
  <span class='va'>...</span>,
  body <span class='op'>=</span> <span class='cn'>NULL</span>,
  type <span class='op'>=</span> <span class='st'>"and"</span>,
  format <span class='op'>=</span> <span class='st'>"DWCA"</span>,
  user <span class='op'>=</span> <span class='cn'>NULL</span>,
  pwd <span class='op'>=</span> <span class='cn'>NULL</span>,
  email <span class='op'>=</span> <span class='cn'>NULL</span>,
  curlopts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>For <code>occ_download()</code> and <code>occ_download_prep()</code>, one or more
objects of class <code>occ_predicate</code> or <code>occ_predicate_list</code>, created by
<code>pred*</code> functions (see <a href='download_predicate_dsl.html'>download_predicate_dsl</a>). If you use this, don't
use <code>body</code> parameter.</p></td>
    </tr>
    <tr>
      <th>body</th>
      <td><p>if you prefer to pass in the payload yourself, use this
parameter. if use this, don't pass anythig to the dots. accepts
either an R list, or JSON. JSON is likely easier, since the JSON
library <span class="pkg">jsonlite</span> requires that you unbox strings that shouldn't
be auto-converted to arrays, which is a bit tedious for large queries.
optional</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>(character) One of equals (=), and (&amp;), or (|), lessThan (&lt;),
lessThanOrEquals (&lt;=), greaterThan (&gt;), greaterThanOrEquals (&gt;=), in,
within, not (!), like, isNotNull</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>(character) The download format. One of 'DWCA' (default),
'SIMPLE_CSV', or 'SPECIES_LIST'</p></td>
    </tr>
    <tr>
      <th>user</th>
      <td><p>(character) User name within GBIF's website. Required. See
"Authentication" below</p></td>
    </tr>
    <tr>
      <th>pwd</th>
      <td><p>(character) User password within GBIF's website. Required. See
"Authentication" below</p></td>
    </tr>
    <tr>
      <th>email</th>
      <td><p>(character) Email address to recieve download notice done
email. Required. See "Authentication" below</p></td>
    </tr>
    <tr>
      <th>curlopts</th>
      <td><p>list of named curl options passed on to
<code><a href='https://docs.ropensci.org/crul/reference/HttpClient.html'>HttpClient</a></code>. see <code><a href='https://rdrr.io/pkg/curl/man/curl_options.html'>curl::curl_options</a></code>
for curl options</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>see <a href='downloads.html'>downloads</a> for an overview of GBIF downloads methods</p>
    <h2 class="hasAnchor" id="geometry"><a class="anchor" href="#geometry"></a>geometry</h2>

    

<p>When using the geometry parameter, make sure that your well known text
(WKT) is formatted as GBIF expects it. They expect WKT to have a
counter-clockwise winding order. For example, the following is clockwise
<code>POLYGON((-19.5 34.1, -25.3 68.1, 35.9 68.1, 27.8 34.1, -19.5 34.1))</code>,
whereas they expect the other order:
<code>POLYGON((-19.5 34.1, 27.8 34.1, 35.9 68.1, -25.3 68.1, -19.5 34.1))</code></p>
<p>note that coordinate pairs are <code>longitude latitude</code>, longitude first, then
latitude</p>
<p>you should not get any results if you supply WKT that has clockwise
winding order.</p>
<p>also note that <code><a href='occ_search.html'>occ_search()</a></code>/<code><a href='occ_data.html'>occ_data()</a></code> behave differently with
respect to WKT in that you can supply clockwise WKT to those
functions but they treat it as an exclusion, so get all data not
inside the WKT area.</p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<ul>
<li><p><code>occ_download_prep</code>: prepares a download request, but DOES NOT execute it.
meant for use with <code><a href='occ_download_queue.html'>occ_download_queue()</a></code></p></li>
<li><p><code>occ_download</code>: prepares a download request and DOES execute it</p></li>
</ul>

    <h2 class="hasAnchor" id="authentication"><a class="anchor" href="#authentication"></a>Authentication</h2>

    

<p>For <code>user</code>, <code>pwd</code>, and <code>email</code> parameters, you can set them in one of
three ways:</p><ul>
<li><p>Set them in your <code>.Rprofile</code> file with the names <code>gbif_user</code>,
<code>gbif_pwd</code>, and <code>gbif_email</code></p></li>
<li><p>Set them in your <code>.Renviron</code>/<code>.bash_profile</code> (or similar) file with the
names <code>GBIF_USER</code>, <code>GBIF_PWD</code>, and <code>GBIF_EMAIL</code></p></li>
<li><p>Simply pass strings to each of the parameters in the function
call</p></li>
</ul>

<p>We strongly recommend the second option - storing your details as
environment variables as it's the most widely used way to store secrets.</p>
<p>See <code><a href='https://rdrr.io/r/base/Startup.html'>?Startup</a></code> for help.</p>
    <h2 class="hasAnchor" id="query-length"><a class="anchor" href="#query-length"></a>Query length</h2>

    

<p>GBIF has a limit of 12,000 characters for a download query. This means
that you can have a pretty long query, but at some point it may lead to an
error on GBIF's side and you'll have to split your query into a few.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>See the API docs
<a href='https://www.gbif.org/developer/occurrence#download'>https://www.gbif.org/developer/occurrence#download</a> for more info,
and the predicates docs
<a href='https://www.gbif.org/developer/occurrence#predicates'>https://www.gbif.org/developer/occurrence#predicates</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other downloads: 
<code><a href='download_predicate_dsl.html'>download_predicate_dsl</a></code>,
<code><a href='occ_download_cached.html'>occ_download_cached</a>()</code>,
<code><a href='occ_download_cancel.html'>occ_download_cancel</a>()</code>,
<code><a href='occ_download_dataset_activity.html'>occ_download_dataset_activity</a>()</code>,
<code><a href='occ_download_datasets.html'>occ_download_datasets</a>()</code>,
<code><a href='occ_download_get.html'>occ_download_get</a>()</code>,
<code><a href='occ_download_import.html'>occ_download_import</a>()</code>,
<code><a href='occ_download_list.html'>occ_download_list</a>()</code>,
<code><a href='occ_download_meta.html'>occ_download_meta</a>()</code>,
<code><a href='occ_download_queue.html'>occ_download_queue</a>()</code>,
<code><a href='occ_download_wait.html'>occ_download_wait</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='co'># occ_download(pred("basisOfRecord", "LITERATURE"))</span></span>
<span class='r-in'><span class='co'># occ_download(pred("taxonKey", 3119195), pred_gt("elevation", 5000))</span></span>
<span class='r-in'><span class='co'># occ_download(pred_gt("decimalLatitude", 50))</span></span>
<span class='r-in'><span class='co'># occ_download(pred_gte("elevation", 9000))</span></span>
<span class='r-in'><span class='co'># occ_download(pred_gte('decimalLatitude", 65))</span></span>
<span class='r-in'><span class='co'># occ_download(pred("country", "US"))</span></span>
<span class='r-in'><span class='co'># occ_download(pred("institutionCode", "TLMF"))</span></span>
<span class='r-in'><span class='co'># occ_download(pred("catalogNumber", 217880))</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># download format</span></span>
<span class='r-in'><span class='co'># z &lt;- occ_download(pred_gte("decimalLatitude", 75),</span></span>
<span class='r-in'><span class='co'>#  format = "SPECIES_LIST")</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># res &lt;- occ_download(pred("taxonKey", 7264332), pred("hasCoordinate", TRUE))</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># pass output directly, or later, to occ_download_meta for more information</span></span>
<span class='r-in'><span class='co'># occ_download(pred_gt('decimalLatitude', 75)) %&gt;% occ_download_meta</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Multiple queries</span></span>
<span class='r-in'><span class='co'># occ_download(pred_gte("decimalLatitude", 65),</span></span>
<span class='r-in'><span class='co'>#  pred_lte("decimalLatitude", -65), type="or")</span></span>
<span class='r-in'><span class='co'># gg &lt;- occ_download(pred("depth", 80), pred("taxonKey", 2343454),</span></span>
<span class='r-in'><span class='co'>#  type="or")</span></span>
<span class='r-in'><span class='co'># x &lt;- occ_download(pred_and(pred_within("POLYGON((-14 42, 9 38, -7 26, -14 42))"),</span></span>
<span class='r-in'><span class='co'>#  pred_gte("elevation", 5000)))</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># complex example with many predicates</span></span>
<span class='r-in'><span class='co'># shows example of how to do date ranges for both year and month</span></span>
<span class='r-in'><span class='co'># res &lt;- occ_download(</span></span>
<span class='r-in'><span class='co'>#  pred_gt("elevation", 5000),</span></span>
<span class='r-in'><span class='co'>#  pred_in("basisOfRecord", c('HUMAN_OBSERVATION','OBSERVATION','MACHINE_OBSERVATION')),</span></span>
<span class='r-in'><span class='co'>#  pred("country", "US"),</span></span>
<span class='r-in'><span class='co'>#  pred("hasCoordinate", TRUE),</span></span>
<span class='r-in'><span class='co'>#  pred("hasGeospatialIssue", FALSE),</span></span>
<span class='r-in'><span class='co'>#  pred_gte("year", 1999),</span></span>
<span class='r-in'><span class='co'>#  pred_lte("year", 2011),</span></span>
<span class='r-in'><span class='co'>#  pred_gte("month", 3),</span></span>
<span class='r-in'><span class='co'>#  pred_lte("month", 8)</span></span>
<span class='r-in'><span class='co'># )</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Using body parameter - pass in your own complete query</span></span>
<span class='r-in'><span class='co'>## as JSON</span></span>
<span class='r-in'><span class='va'>query1</span> <span class='op'>&lt;-</span> <span class='st'>'{"creator":"sckott",</span>
<span class='r-in'>  "notification_address":["stuff1@gmail.com"],</span>
<span class='r-in'>  "predicate":{"type":"and","predicates":[</span>
<span class='r-in'>    {"type":"equals","key":"TAXON_KEY","value":"7264332"},</span>
<span class='r-in'>    {"type":"equals","key":"HAS_COORDINATE","value":"TRUE"}]}</span>
<span class='r-in'> }'</span></span>
<span class='r-in'><span class='co'># res &lt;- occ_download(body = query1, curlopts=list(verbose=TRUE))</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## as a list</span></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://arxiv.org/abs/1403.2805'>jsonlite</a></span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>query</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span></span>
<span class='r-in'>  creator <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"sckott"</span><span class='op'>)</span>,</span>
<span class='r-in'>  notification_address <span class='op'>=</span> <span class='st'>"stuff1@gmail.com"</span>,</span>
<span class='r-in'>  predicate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span></span>
<span class='r-in'>    type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"and"</span><span class='op'>)</span>,</span>
<span class='r-in'>    predicates <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span></span>
<span class='r-in'>      <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"equals"</span><span class='op'>)</span>, key <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"TAXON_KEY"</span><span class='op'>)</span>,</span>
<span class='r-in'>        value <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"7264332"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>      <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"equals"</span><span class='op'>)</span>, key <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"HAS_COORDINATE"</span><span class='op'>)</span>,</span>
<span class='r-in'>        value <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/jsonlite/man/unbox.html'>unbox</a></span><span class='op'>(</span><span class='st'>"TRUE"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'>    <span class='op'>)</span></span>
<span class='r-in'>  <span class='op'>)</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-in'><span class='co'># res &lt;- occ_download(body = query, curlopts = list(verbose = TRUE))</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Prepared query</span></span>
<span class='r-in'><span class='fu'>occ_download_prep</span><span class='op'>(</span><span class='fu'><a href='download_predicate_dsl.html'>pred</a></span><span class='op'>(</span><span class='st'>"basisOfRecord"</span>, <span class='st'>"LITERATURE"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>occ_download_prep</span><span class='op'>(</span><span class='fu'><a href='download_predicate_dsl.html'>pred</a></span><span class='op'>(</span><span class='st'>"basisOfRecord"</span>, <span class='st'>"LITERATURE"</span><span class='op'>)</span>, format <span class='op'>=</span> <span class='st'>"SIMPLE_CSV"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>occ_download_prep</span><span class='op'>(</span><span class='fu'><a href='download_predicate_dsl.html'>pred</a></span><span class='op'>(</span><span class='st'>"basisOfRecord"</span>, <span class='st'>"LITERATURE"</span><span class='op'>)</span>, format <span class='op'>=</span> <span class='st'>"SPECIES_LIST"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>occ_download_prep</span><span class='op'>(</span><span class='fu'><a href='download_predicate_dsl.html'>pred_in</a></span><span class='op'>(</span><span class='st'>"taxonKey"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2977832</span>, <span class='fl'>2977901</span>, <span class='fl'>2977966</span>, <span class='fl'>2977835</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>occ_download_prep</span><span class='op'>(</span><span class='fu'><a href='download_predicate_dsl.html'>pred_within</a></span><span class='op'>(</span><span class='st'>"POLYGON((-14 42, 9 38, -7 26, -14 42))"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## a complicated example</span></span>
<span class='r-in'><span class='fu'>occ_download_prep</span><span class='op'>(</span></span>
<span class='r-in'>  <span class='fu'><a href='download_predicate_dsl.html'>pred_in</a></span><span class='op'>(</span><span class='st'>"basisOfRecord"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"MACHINE_OBSERVATION"</span>, <span class='st'>"HUMAN_OBSERVATION"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>  <span class='fu'><a href='download_predicate_dsl.html'>pred_in</a></span><span class='op'>(</span><span class='st'>"taxonKey"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2498343</span>, <span class='fl'>2481776</span>, <span class='fl'>2481890</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>  <span class='fu'><a href='download_predicate_dsl.html'>pred_in</a></span><span class='op'>(</span><span class='st'>"country"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"GB"</span>, <span class='st'>"IE"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>  <span class='fu'><a href='download_predicate_dsl.html'>pred_or</a></span><span class='op'>(</span><span class='fu'><a href='download_predicate_dsl.html'>pred_lte</a></span><span class='op'>(</span><span class='st'>"year"</span>, <span class='fl'>1989</span><span class='op'>)</span>, <span class='fu'><a href='download_predicate_dsl.html'>pred</a></span><span class='op'>(</span><span class='st'>"year"</span>, <span class='fl'>2000</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># x = occ_download(</span></span>
<span class='r-in'><span class='co'>#   pred_in("basisOfRecord", c("MACHINE_OBSERVATION", "HUMAN_OBSERVATION")),</span></span>
<span class='r-in'><span class='co'>#   pred_in("taxonKey", c(9206251, 3112648)),</span></span>
<span class='r-in'><span class='co'>#   pred_in("country", c("US", "MX")),</span></span>
<span class='r-in'><span class='co'>#   pred_and(pred_gte("year", 1989), pred_lte("year", 1991))</span></span>
<span class='r-in'><span class='co'># )</span></span>
<span class='r-in'><span class='co'># occ_download_meta(x)</span></span>
<span class='r-in'><span class='co'># z &lt;- occ_download_get(x)</span></span>
<span class='r-in'><span class='co'># df &lt;- occ_download_import(z)</span></span>
<span class='r-in'><span class='co'># str(df)</span></span>
<span class='r-in'><span class='co'># library(dplyr)</span></span>
<span class='r-in'><span class='co'># unique(df$basisOfRecord)</span></span>
<span class='r-in'><span class='co'># unique(df$taxonKey)</span></span>
<span class='r-in'><span class='co'># unique(df$countryCode)</span></span>
<span class='r-in'><span class='co'># sort(unique(df$year))</span></span>
<span class='r-in'><span class='op'>}</span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Scott Chamberlain, Damiano Oldoni, rOpenSci, John Waller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


